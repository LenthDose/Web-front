{"remainingRequest":"C:\\Users\\Silhouette76\\Desktop\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Silhouette76\\Desktop\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Silhouette76\\Desktop\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Silhouette76\\Desktop\\vue-admin-template\\src\\views\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Silhouette76\\Desktop\\vue-admin-template\\src\\views\\Home.vue","mtime":1640273669617},{"path":"C:\\Users\\Silhouette76\\Desktop\\vue-admin-template\\babel.config.js","mtime":1638098696970},{"path":"C:\\Users\\Silhouette76\\Desktop\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1638098759177},{"path":"C:\\Users\\Silhouette76\\Desktop\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js","mtime":1638098760924},{"path":"C:\\Users\\Silhouette76\\Desktop\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1638098759177},{"path":"C:\\Users\\Silhouette76\\Desktop\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js","mtime":1638098761214}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGdldERpc2NvdW50IH0gZnJvbSAnQC9hcGkvZGlzY291bnQnOwppbXBvcnQgeyBnZXRUeXBlTGlzdCB9IGZyb20gJ0AvYXBpL3R5cGUnOwppbXBvcnQgeyBhZGQgfSBmcm9tICdAL2FwaS9ib29rJzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpbWdMaXN0OiBbewogICAgICAgIGltZzogcmVxdWlyZSgnLi4vYXNzZXRzL2ltZy9WQ0cyMThlZWNmODJhYi5qcGcnKQogICAgICB9LCB7CiAgICAgICAgaW1nOiByZXF1aXJlKCcuLi9hc3NldHMvaW1nL1ZDRzQxTjExMjkwNzYzMDEuanBnJykKICAgICAgfSwgewogICAgICAgIGltZzogcmVxdWlyZSgnLi4vYXNzZXRzL2ltZy9WQ0cyMWdpYzE5OTk5NTk1LmpwZycpCiAgICAgIH1dLAogICAgICBkaWFsb2dUaXRsZTogJ+mihOWumicsCiAgICAgIGJvb2s6IHt9LAogICAgICBkaWFsb2dGb3JtVmlzaWJsZTogZmFsc2UsCiAgICAgIHR5cGU6IFtdLAogICAgICBkaXNjb3VudDogW10sCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBvYmo6IHt9CiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgICdsb2FkaW5nJzogZnVuY3Rpb24gbG9hZGluZyh2YWwpIHsKICAgICAgaWYgKHZhbCA9PT0gZmFsc2UpIHsKICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgdGhpcy4kcmVmc1snYm9vayddLnJlc2V0RmllbGRzKCk7CiAgICAgICAgdGhpcy4kYWxlcnQoJ+aEn+iwouaCqOeahOmihOWumiznqI3lkI7kvJrmnInnn63kv6Hmj5DphpIs6K+35Y+K5pe25p+l5pS2JywgJ+aPkOekuicsIHsKICAgICAgICAgIGNlbnRlcjogdHJ1ZQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBnZXRUeXBlTGlzdCgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBfdGhpcy50eXBlID0gcmVzLmRhdGE7CiAgICB9KTsKICAgIGdldERpc2NvdW50KCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIF90aGlzLmRpc2NvdW50ID0gcmVzLmRhdGE7CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHJlc2VydmF0aW9uOiBmdW5jdGlvbiByZXNlcnZhdGlvbih2YWwpIHsKICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IHRydWU7CiAgICAgIHRoaXMuYm9vay50eXBlX2lkID0gdmFsLnR5cGVfaWQ7CiAgICAgIHRoaXMuYm9vay50eXBlX3ByaWNlID0gdmFsLnR5cGVfcHJpY2U7CiAgICB9LAogICAgb25TdWJtaXQ6IGZ1bmN0aW9uIG9uU3VibWl0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGFkZCh0aGlzLmJvb2spLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzMi5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSwgNTAwMCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczIuJHJlZnNbJ2Jvb2snXS5yZXNldEZpZWxkcygpOwogICAgICB9KTsKICAgIH0sCiAgICBvbkNhbmNlbDogZnVuY3Rpb24gb25DYW5jZWwoKSB7CiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZTsKICAgIH0sCiAgICBmb3JtYXR0ZXJQaWNPbmU6IGZ1bmN0aW9uIGZvcm1hdHRlclBpY09uZShyb3cpIHsKICAgICAgaWYgKHJvdyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdmFyIHBpYyA9IHJvdy5zcGxpdCgnKycpOwogICAgICAgIHJldHVybiBwaWNbMF07CiAgICAgIH0KICAgIH0sCiAgICBjYWxUaW1lOiBmdW5jdGlvbiBjYWxUaW1lKCkgewogICAgICB2YXIgc3RpbWUgPSB0aGlzLmJvb2suYm9va19hcnJpcmU7CiAgICAgIHZhciBldGltZSA9IHRoaXMuYm9vay5ib29rX2xlYXZlOwogICAgICB2YXIgdXNlZFRpbWUgPSBEYXRlLnBhcnNlKGV0aW1lKSAtIERhdGUucGFyc2Uoc3RpbWUpOwogICAgICB2YXIgZGF5cyA9IE1hdGguZmxvb3IodXNlZFRpbWUgLyAoMjQgKiAzNjAwICogMTAwMCkpOwogICAgICB0aGlzLmJvb2suYm9va19kYXkgPSBkYXlzOwogICAgfSwKICAgIGJvb2twcmljZTogZnVuY3Rpb24gYm9va3ByaWNlKHZhbCkgewogICAgICBpZiAodmFsKSB7CiAgICAgICAgdGhpcy5vYmogPSB0aGlzLmRpc2NvdW50LmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBpdGVtLmRpc2NvdW50X2lkID09PSB2YWwuZGlzY291bnRfaWQ7CiAgICAgICAgfSk7CiAgICAgICAgdmFyIHByaWNlID0gcGFyc2VGbG9hdCh2YWwudHlwZV9wcmljZSkgKiBwYXJzZUZsb2F0KHRoaXMub2JqLmRpc2NvdW50X3ZhbHVlKTsKICAgICAgICB0aGlzLmJvb2suYm9va19wcmljZSA9IHByaWNlOwogICAgICAgIHRoaXMuYm9vay5kaXNfdmFsdWUgPSB0aGlzLm9iai5kaXNjb3VudF92YWx1ZTsKICAgICAgICB0aGlzLmJvb2suZGlzX3JlYXNvbiA9IHRoaXMub2JqLmRpc2NvdW50X3JlYXNvbjsKICAgICAgICB0aGlzLmJvb2sudHlwZV9uYW1lID0gdmFsLnR5cGVfbmFtZTsKICAgICAgICByZXR1cm4gcHJpY2U7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["Home.vue"],"names":[],"mappings":"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","sourcesContent":["<template lang=\"\">\r\n  <div>\r\n    <el-carousel indicator-position=\"outside\">\r\n      <el-carousel-item v-for=\"item in imgList\" :key=\"item.img\">\r\n        <img :src=\"item.img\" style=\"width: 100%;height:100%\">\r\n      </el-carousel-item>\r\n    </el-carousel>\r\n\r\n    <div>\r\n      <el-row>\r\n        <el-col v-for=\"(item) in type\" :key=\"item.type_id\" :span=\"4\" :offset=\"item > 0 ? 2 : 0\">\r\n          <el-card :body-style=\"{ padding: '0px' }\">\r\n            <el-image\r\n              style=\"width: 100px; height: 100px\"\r\n              :src=\"formatterPicOne(item.type_pic)\"\r\n            />\r\n            <div style=\"padding: 14px;\">\r\n              <span>{{ item.type_name }}</span><br>\r\n              <span>{{ item.type_desc }}</span><br>\r\n              <span v-if=\"item.discount_id == ''\">￥{{ item.type_price }}</span>\r\n              <span\r\n                v-if=\"item.discount_id !== ''\"\r\n                style=\"text-decoration:line-through;\"\r\n              >￥{{ item.type_price }}</span>\r\n              <br>\r\n              <span v-if=\"item.discount_id !== ''\">\r\n                ￥{{ bookprice(item) }}\r\n              </span>\r\n              <div class=\"bottom clearfix\">\r\n                <el-button type=\"text\" class=\"button\" @click=\"reservation(item)\">预定</el-button>\r\n              </div>\r\n            </div>\r\n          </el-card>\r\n        </el-col>\r\n      </el-row>\r\n    </div>\r\n    <transition name=\"el-fade-in\">\r\n      <el-dialog :title=\"dialogTitle\" width=\"50%\" :visible.sync=\"dialogFormVisible\">\r\n        <el-form ref=\"book\" v-loading=\"loading\" :model=\"book\">\r\n          <el-form-item label=\"入住时间\" prop=\"book_arrire\">\r\n            <el-col :span=\"11\">\r\n              <el-date-picker\r\n                v-model=\"book.book_arrire\"\r\n                type=\"datetime\"\r\n                placeholder=\"选择日期\"\r\n                style=\"width: 190%\"\r\n                default-time=\"12:00:00\"\r\n                format=\"yyyy-MM-dd HH:mm:ss\"\r\n                value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n              />\r\n            </el-col>\r\n          </el-form-item>\r\n          <el-form-item label=\"退房时间\" prop=\"book_leave\">\r\n            <el-col :span=\"11\">\r\n              <el-date-picker\r\n                v-model=\"book.book_leave\"\r\n                type=\"datetime\"\r\n                placeholder=\"选择日期\"\r\n                style=\"width: 190%\"\r\n                default-time=\"12:00:00\"\r\n                format=\"yyyy-MM-dd HH:mm:ss\"\r\n                value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n                @change=\"calTime\"\r\n              />\r\n            </el-col>\r\n          </el-form-item>\r\n          <el-form-item label=\"入住人数\" prop=\"book_person\">\r\n            <el-input v-model=\"book.book_person\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"预定人电话\" prop=\"book_phone\">\r\n            <el-input v-model=\"book.book_phone\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"\">\r\n            <el-button type=\"primary\" @click=\"onSubmit\">确定</el-button>\r\n            <el-button type=\"primary\" @click=\"onCancel\">取消</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </el-dialog>\r\n    </transition>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { getDiscount } from '@/api/discount'\r\nimport { getTypeList } from '@/api/type'\r\nimport { add } from '@/api/book'\r\nexport default {\r\n  data() {\r\n    return {\r\n      imgList: [\r\n        { img: require('../assets/img/VCG218eecf82ab.jpg') },\r\n        { img: require('../assets/img/VCG41N1129076301.jpg') },\r\n        { img: require('../assets/img/VCG21gic19999595.jpg') }\r\n      ],\r\n      dialogTitle: '预定',\r\n      book: {},\r\n      dialogFormVisible: false,\r\n      type: [],\r\n      discount: [],\r\n      loading: false,\r\n      obj: {}\r\n    }\r\n  },\r\n  watch: {\r\n    'loading'(val) {\r\n      if (val === false) {\r\n        this.dialogFormVisible = false\r\n        this.$refs['book'].resetFields()\r\n        this.$alert('感谢您的预定,稍后会有短信提醒,请及时查收', '提示', {\r\n          center: true\r\n        })\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    getTypeList().then(res => {\r\n      this.type = res.data\r\n    })\r\n    getDiscount().then(res => {\r\n      this.discount = res.data\r\n    })\r\n  },\r\n  methods: {\r\n    reservation(val) {\r\n      this.dialogFormVisible = true\r\n      this.book.type_id = val.type_id\r\n      this.book.type_price = val.type_price\r\n    },\r\n    onSubmit() {\r\n      add(this.book).then(() => {\r\n        this.loading = true\r\n        setTimeout(() => {\r\n          this.loading = false\r\n        }, 5000)\r\n      }).catch(() => {\r\n        this.$refs['book'].resetFields()\r\n      })\r\n    },\r\n    onCancel() {\r\n      this.dialogFormVisible = false\r\n    },\r\n    formatterPicOne(row) {\r\n      if (row !== undefined) {\r\n        const pic = row.split('+')\r\n        return pic[0]\r\n      }\r\n    },\r\n    calTime() {\r\n      const stime = this.book.book_arrire\r\n      const etime = this.book.book_leave\r\n      const usedTime = Date.parse(etime) - Date.parse(stime)\r\n      const days = Math.floor(usedTime / (24 * 3600 * 1000))\r\n      this.book.book_day = days\r\n    },\r\n    bookprice(val) {\r\n      if (val) {\r\n        this.obj = this.discount.find((item) => {\r\n          return item.discount_id === val.discount_id\r\n        })\r\n        const price = parseFloat(val.type_price) * parseFloat(this.obj.discount_value)\r\n        this.book.book_price = price\r\n        this.book.dis_value = this.obj.discount_value\r\n        this.book.dis_reason = this.obj.discount_reason\r\n        this.book.type_name = val.type_name\r\n        return price\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"css\">\r\n.el-carousel{\r\n    margin: 5px;\r\n}\r\n.el-carousel__item:nth-child(2n) {\r\n    background-color: #99a9bf;\r\n}\r\n\r\n.el-carousel__item:nth-child(2n+1) {\r\n    background-color: #d3dce6;\r\n}\r\n\r\n</style>\r\n"],"sourceRoot":"src/views"}]}