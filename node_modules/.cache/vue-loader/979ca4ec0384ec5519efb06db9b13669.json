{"remainingRequest":"C:\\Users\\Silhouette76\\Desktop\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Silhouette76\\Desktop\\vue-admin-template\\src\\views\\Home.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\Users\\Silhouette76\\Desktop\\vue-admin-template\\src\\views\\Home.vue","mtime":1640273669617},{"path":"C:\\Users\\Silhouette76\\Desktop\\vue-admin-template\\node_modules\\css-loader\\dist\\cjs.js","mtime":1638098760125},{"path":"C:\\Users\\Silhouette76\\Desktop\\vue-admin-template\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1638098761912},{"path":"C:\\Users\\Silhouette76\\Desktop\\vue-admin-template\\node_modules\\postcss-loader\\src\\index.js","mtime":1638098760921},{"path":"C:\\Users\\Silhouette76\\Desktop\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1638098759177},{"path":"C:\\Users\\Silhouette76\\Desktop\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js","mtime":1638098761214}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmVsLWNhcm91c2Vsew0KICAgIG1hcmdpbjogNXB4Ow0KfQ0KLmVsLWNhcm91c2VsX19pdGVtOm50aC1jaGlsZCgybikgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICM5OWE5YmY7DQp9DQoNCi5lbC1jYXJvdXNlbF9faXRlbTpudGgtY2hpbGQoMm4rMSkgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNkM2RjZTY7DQp9DQoNCg=="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0KA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template lang=\"\">\r\n  <div>\r\n    <el-carousel indicator-position=\"outside\">\r\n      <el-carousel-item v-for=\"item in imgList\" :key=\"item.img\">\r\n        <img :src=\"item.img\" style=\"width: 100%;height:100%\">\r\n      </el-carousel-item>\r\n    </el-carousel>\r\n\r\n    <div>\r\n      <el-row>\r\n        <el-col v-for=\"(item) in type\" :key=\"item.type_id\" :span=\"4\" :offset=\"item > 0 ? 2 : 0\">\r\n          <el-card :body-style=\"{ padding: '0px' }\">\r\n            <el-image\r\n              style=\"width: 100px; height: 100px\"\r\n              :src=\"formatterPicOne(item.type_pic)\"\r\n            />\r\n            <div style=\"padding: 14px;\">\r\n              <span>{{ item.type_name }}</span><br>\r\n              <span>{{ item.type_desc }}</span><br>\r\n              <span v-if=\"item.discount_id == ''\">￥{{ item.type_price }}</span>\r\n              <span\r\n                v-if=\"item.discount_id !== ''\"\r\n                style=\"text-decoration:line-through;\"\r\n              >￥{{ item.type_price }}</span>\r\n              <br>\r\n              <span v-if=\"item.discount_id !== ''\">\r\n                ￥{{ bookprice(item) }}\r\n              </span>\r\n              <div class=\"bottom clearfix\">\r\n                <el-button type=\"text\" class=\"button\" @click=\"reservation(item)\">预定</el-button>\r\n              </div>\r\n            </div>\r\n          </el-card>\r\n        </el-col>\r\n      </el-row>\r\n    </div>\r\n    <transition name=\"el-fade-in\">\r\n      <el-dialog :title=\"dialogTitle\" width=\"50%\" :visible.sync=\"dialogFormVisible\">\r\n        <el-form ref=\"book\" v-loading=\"loading\" :model=\"book\">\r\n          <el-form-item label=\"入住时间\" prop=\"book_arrire\">\r\n            <el-col :span=\"11\">\r\n              <el-date-picker\r\n                v-model=\"book.book_arrire\"\r\n                type=\"datetime\"\r\n                placeholder=\"选择日期\"\r\n                style=\"width: 190%\"\r\n                default-time=\"12:00:00\"\r\n                format=\"yyyy-MM-dd HH:mm:ss\"\r\n                value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n              />\r\n            </el-col>\r\n          </el-form-item>\r\n          <el-form-item label=\"退房时间\" prop=\"book_leave\">\r\n            <el-col :span=\"11\">\r\n              <el-date-picker\r\n                v-model=\"book.book_leave\"\r\n                type=\"datetime\"\r\n                placeholder=\"选择日期\"\r\n                style=\"width: 190%\"\r\n                default-time=\"12:00:00\"\r\n                format=\"yyyy-MM-dd HH:mm:ss\"\r\n                value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n                @change=\"calTime\"\r\n              />\r\n            </el-col>\r\n          </el-form-item>\r\n          <el-form-item label=\"入住人数\" prop=\"book_person\">\r\n            <el-input v-model=\"book.book_person\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"预定人电话\" prop=\"book_phone\">\r\n            <el-input v-model=\"book.book_phone\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"\">\r\n            <el-button type=\"primary\" @click=\"onSubmit\">确定</el-button>\r\n            <el-button type=\"primary\" @click=\"onCancel\">取消</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </el-dialog>\r\n    </transition>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { getDiscount } from '@/api/discount'\r\nimport { getTypeList } from '@/api/type'\r\nimport { add } from '@/api/book'\r\nexport default {\r\n  data() {\r\n    return {\r\n      imgList: [\r\n        { img: require('../assets/img/VCG218eecf82ab.jpg') },\r\n        { img: require('../assets/img/VCG41N1129076301.jpg') },\r\n        { img: require('../assets/img/VCG21gic19999595.jpg') }\r\n      ],\r\n      dialogTitle: '预定',\r\n      book: {},\r\n      dialogFormVisible: false,\r\n      type: [],\r\n      discount: [],\r\n      loading: false,\r\n      obj: {}\r\n    }\r\n  },\r\n  watch: {\r\n    'loading'(val) {\r\n      if (val === false) {\r\n        this.dialogFormVisible = false\r\n        this.$refs['book'].resetFields()\r\n        this.$alert('感谢您的预定,稍后会有短信提醒,请及时查收', '提示', {\r\n          center: true\r\n        })\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    getTypeList().then(res => {\r\n      this.type = res.data\r\n    })\r\n    getDiscount().then(res => {\r\n      this.discount = res.data\r\n    })\r\n  },\r\n  methods: {\r\n    reservation(val) {\r\n      this.dialogFormVisible = true\r\n      this.book.type_id = val.type_id\r\n      this.book.type_price = val.type_price\r\n    },\r\n    onSubmit() {\r\n      add(this.book).then(() => {\r\n        this.loading = true\r\n        setTimeout(() => {\r\n          this.loading = false\r\n        }, 5000)\r\n      }).catch(() => {\r\n        this.$refs['book'].resetFields()\r\n      })\r\n    },\r\n    onCancel() {\r\n      this.dialogFormVisible = false\r\n    },\r\n    formatterPicOne(row) {\r\n      if (row !== undefined) {\r\n        const pic = row.split('+')\r\n        return pic[0]\r\n      }\r\n    },\r\n    calTime() {\r\n      const stime = this.book.book_arrire\r\n      const etime = this.book.book_leave\r\n      const usedTime = Date.parse(etime) - Date.parse(stime)\r\n      const days = Math.floor(usedTime / (24 * 3600 * 1000))\r\n      this.book.book_day = days\r\n    },\r\n    bookprice(val) {\r\n      if (val) {\r\n        this.obj = this.discount.find((item) => {\r\n          return item.discount_id === val.discount_id\r\n        })\r\n        const price = parseFloat(val.type_price) * parseFloat(this.obj.discount_value)\r\n        this.book.book_price = price\r\n        this.book.dis_value = this.obj.discount_value\r\n        this.book.dis_reason = this.obj.discount_reason\r\n        this.book.type_name = val.type_name\r\n        return price\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"css\">\r\n.el-carousel{\r\n    margin: 5px;\r\n}\r\n.el-carousel__item:nth-child(2n) {\r\n    background-color: #99a9bf;\r\n}\r\n\r\n.el-carousel__item:nth-child(2n+1) {\r\n    background-color: #d3dce6;\r\n}\r\n\r\n</style>\r\n"]}]}