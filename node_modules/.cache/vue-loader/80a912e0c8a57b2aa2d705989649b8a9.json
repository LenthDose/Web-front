{"remainingRequest":"C:\\Users\\Silhouette76\\Desktop\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Silhouette76\\Desktop\\vue-admin-template\\src\\views\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Silhouette76\\Desktop\\vue-admin-template\\src\\views\\Home.vue","mtime":1640273669617},{"path":"C:\\Users\\Silhouette76\\Desktop\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1638098759177},{"path":"C:\\Users\\Silhouette76\\Desktop\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js","mtime":1638098760924},{"path":"C:\\Users\\Silhouette76\\Desktop\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1638098759177},{"path":"C:\\Users\\Silhouette76\\Desktop\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js","mtime":1638098761214}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBnZXREaXNjb3VudCB9IGZyb20gJ0AvYXBpL2Rpc2NvdW50Jw0KaW1wb3J0IHsgZ2V0VHlwZUxpc3QgfSBmcm9tICdAL2FwaS90eXBlJw0KaW1wb3J0IHsgYWRkIH0gZnJvbSAnQC9hcGkvYm9vaycNCmV4cG9ydCBkZWZhdWx0IHsNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgaW1nTGlzdDogWw0KICAgICAgICB7IGltZzogcmVxdWlyZSgnLi4vYXNzZXRzL2ltZy9WQ0cyMThlZWNmODJhYi5qcGcnKSB9LA0KICAgICAgICB7IGltZzogcmVxdWlyZSgnLi4vYXNzZXRzL2ltZy9WQ0c0MU4xMTI5MDc2MzAxLmpwZycpIH0sDQogICAgICAgIHsgaW1nOiByZXF1aXJlKCcuLi9hc3NldHMvaW1nL1ZDRzIxZ2ljMTk5OTk1OTUuanBnJykgfQ0KICAgICAgXSwNCiAgICAgIGRpYWxvZ1RpdGxlOiAn6aKE5a6aJywNCiAgICAgIGJvb2s6IHt9LA0KICAgICAgZGlhbG9nRm9ybVZpc2libGU6IGZhbHNlLA0KICAgICAgdHlwZTogW10sDQogICAgICBkaXNjb3VudDogW10sDQogICAgICBsb2FkaW5nOiBmYWxzZSwNCiAgICAgIG9iajoge30NCiAgICB9DQogIH0sDQogIHdhdGNoOiB7DQogICAgJ2xvYWRpbmcnKHZhbCkgew0KICAgICAgaWYgKHZhbCA9PT0gZmFsc2UpIHsNCiAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlDQogICAgICAgIHRoaXMuJHJlZnNbJ2Jvb2snXS5yZXNldEZpZWxkcygpDQogICAgICAgIHRoaXMuJGFsZXJ0KCfmhJ/osKLmgqjnmoTpooTlrpos56iN5ZCO5Lya5pyJ55+t5L+h5o+Q6YaSLOivt+WPiuaXtuafpeaUticsICfmj5DnpLonLCB7DQogICAgICAgICAgY2VudGVyOiB0cnVlDQogICAgICAgIH0pDQogICAgICB9DQogICAgfQ0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIGdldFR5cGVMaXN0KCkudGhlbihyZXMgPT4gew0KICAgICAgdGhpcy50eXBlID0gcmVzLmRhdGENCiAgICB9KQ0KICAgIGdldERpc2NvdW50KCkudGhlbihyZXMgPT4gew0KICAgICAgdGhpcy5kaXNjb3VudCA9IHJlcy5kYXRhDQogICAgfSkNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIHJlc2VydmF0aW9uKHZhbCkgew0KICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IHRydWUNCiAgICAgIHRoaXMuYm9vay50eXBlX2lkID0gdmFsLnR5cGVfaWQNCiAgICAgIHRoaXMuYm9vay50eXBlX3ByaWNlID0gdmFsLnR5cGVfcHJpY2UNCiAgICB9LA0KICAgIG9uU3VibWl0KCkgew0KICAgICAgYWRkKHRoaXMuYm9vaykudGhlbigoKSA9PiB7DQogICAgICAgIHRoaXMubG9hZGluZyA9IHRydWUNCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UNCiAgICAgICAgfSwgNTAwMCkNCiAgICAgIH0pLmNhdGNoKCgpID0+IHsNCiAgICAgICAgdGhpcy4kcmVmc1snYm9vayddLnJlc2V0RmllbGRzKCkNCiAgICAgIH0pDQogICAgfSwNCiAgICBvbkNhbmNlbCgpIHsNCiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZQ0KICAgIH0sDQogICAgZm9ybWF0dGVyUGljT25lKHJvdykgew0KICAgICAgaWYgKHJvdyAhPT0gdW5kZWZpbmVkKSB7DQogICAgICAgIGNvbnN0IHBpYyA9IHJvdy5zcGxpdCgnKycpDQogICAgICAgIHJldHVybiBwaWNbMF0NCiAgICAgIH0NCiAgICB9LA0KICAgIGNhbFRpbWUoKSB7DQogICAgICBjb25zdCBzdGltZSA9IHRoaXMuYm9vay5ib29rX2FycmlyZQ0KICAgICAgY29uc3QgZXRpbWUgPSB0aGlzLmJvb2suYm9va19sZWF2ZQ0KICAgICAgY29uc3QgdXNlZFRpbWUgPSBEYXRlLnBhcnNlKGV0aW1lKSAtIERhdGUucGFyc2Uoc3RpbWUpDQogICAgICBjb25zdCBkYXlzID0gTWF0aC5mbG9vcih1c2VkVGltZSAvICgyNCAqIDM2MDAgKiAxMDAwKSkNCiAgICAgIHRoaXMuYm9vay5ib29rX2RheSA9IGRheXMNCiAgICB9LA0KICAgIGJvb2twcmljZSh2YWwpIHsNCiAgICAgIGlmICh2YWwpIHsNCiAgICAgICAgdGhpcy5vYmogPSB0aGlzLmRpc2NvdW50LmZpbmQoKGl0ZW0pID0+IHsNCiAgICAgICAgICByZXR1cm4gaXRlbS5kaXNjb3VudF9pZCA9PT0gdmFsLmRpc2NvdW50X2lkDQogICAgICAgIH0pDQogICAgICAgIGNvbnN0IHByaWNlID0gcGFyc2VGbG9hdCh2YWwudHlwZV9wcmljZSkgKiBwYXJzZUZsb2F0KHRoaXMub2JqLmRpc2NvdW50X3ZhbHVlKQ0KICAgICAgICB0aGlzLmJvb2suYm9va19wcmljZSA9IHByaWNlDQogICAgICAgIHRoaXMuYm9vay5kaXNfdmFsdWUgPSB0aGlzLm9iai5kaXNjb3VudF92YWx1ZQ0KICAgICAgICB0aGlzLmJvb2suZGlzX3JlYXNvbiA9IHRoaXMub2JqLmRpc2NvdW50X3JlYXNvbg0KICAgICAgICB0aGlzLmJvb2sudHlwZV9uYW1lID0gdmFsLnR5cGVfbmFtZQ0KICAgICAgICByZXR1cm4gcHJpY2UNCiAgICAgIH0NCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template lang=\"\">\r\n  <div>\r\n    <el-carousel indicator-position=\"outside\">\r\n      <el-carousel-item v-for=\"item in imgList\" :key=\"item.img\">\r\n        <img :src=\"item.img\" style=\"width: 100%;height:100%\">\r\n      </el-carousel-item>\r\n    </el-carousel>\r\n\r\n    <div>\r\n      <el-row>\r\n        <el-col v-for=\"(item) in type\" :key=\"item.type_id\" :span=\"4\" :offset=\"item > 0 ? 2 : 0\">\r\n          <el-card :body-style=\"{ padding: '0px' }\">\r\n            <el-image\r\n              style=\"width: 100px; height: 100px\"\r\n              :src=\"formatterPicOne(item.type_pic)\"\r\n            />\r\n            <div style=\"padding: 14px;\">\r\n              <span>{{ item.type_name }}</span><br>\r\n              <span>{{ item.type_desc }}</span><br>\r\n              <span v-if=\"item.discount_id == ''\">￥{{ item.type_price }}</span>\r\n              <span\r\n                v-if=\"item.discount_id !== ''\"\r\n                style=\"text-decoration:line-through;\"\r\n              >￥{{ item.type_price }}</span>\r\n              <br>\r\n              <span v-if=\"item.discount_id !== ''\">\r\n                ￥{{ bookprice(item) }}\r\n              </span>\r\n              <div class=\"bottom clearfix\">\r\n                <el-button type=\"text\" class=\"button\" @click=\"reservation(item)\">预定</el-button>\r\n              </div>\r\n            </div>\r\n          </el-card>\r\n        </el-col>\r\n      </el-row>\r\n    </div>\r\n    <transition name=\"el-fade-in\">\r\n      <el-dialog :title=\"dialogTitle\" width=\"50%\" :visible.sync=\"dialogFormVisible\">\r\n        <el-form ref=\"book\" v-loading=\"loading\" :model=\"book\">\r\n          <el-form-item label=\"入住时间\" prop=\"book_arrire\">\r\n            <el-col :span=\"11\">\r\n              <el-date-picker\r\n                v-model=\"book.book_arrire\"\r\n                type=\"datetime\"\r\n                placeholder=\"选择日期\"\r\n                style=\"width: 190%\"\r\n                default-time=\"12:00:00\"\r\n                format=\"yyyy-MM-dd HH:mm:ss\"\r\n                value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n              />\r\n            </el-col>\r\n          </el-form-item>\r\n          <el-form-item label=\"退房时间\" prop=\"book_leave\">\r\n            <el-col :span=\"11\">\r\n              <el-date-picker\r\n                v-model=\"book.book_leave\"\r\n                type=\"datetime\"\r\n                placeholder=\"选择日期\"\r\n                style=\"width: 190%\"\r\n                default-time=\"12:00:00\"\r\n                format=\"yyyy-MM-dd HH:mm:ss\"\r\n                value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n                @change=\"calTime\"\r\n              />\r\n            </el-col>\r\n          </el-form-item>\r\n          <el-form-item label=\"入住人数\" prop=\"book_person\">\r\n            <el-input v-model=\"book.book_person\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"预定人电话\" prop=\"book_phone\">\r\n            <el-input v-model=\"book.book_phone\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"\">\r\n            <el-button type=\"primary\" @click=\"onSubmit\">确定</el-button>\r\n            <el-button type=\"primary\" @click=\"onCancel\">取消</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </el-dialog>\r\n    </transition>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { getDiscount } from '@/api/discount'\r\nimport { getTypeList } from '@/api/type'\r\nimport { add } from '@/api/book'\r\nexport default {\r\n  data() {\r\n    return {\r\n      imgList: [\r\n        { img: require('../assets/img/VCG218eecf82ab.jpg') },\r\n        { img: require('../assets/img/VCG41N1129076301.jpg') },\r\n        { img: require('../assets/img/VCG21gic19999595.jpg') }\r\n      ],\r\n      dialogTitle: '预定',\r\n      book: {},\r\n      dialogFormVisible: false,\r\n      type: [],\r\n      discount: [],\r\n      loading: false,\r\n      obj: {}\r\n    }\r\n  },\r\n  watch: {\r\n    'loading'(val) {\r\n      if (val === false) {\r\n        this.dialogFormVisible = false\r\n        this.$refs['book'].resetFields()\r\n        this.$alert('感谢您的预定,稍后会有短信提醒,请及时查收', '提示', {\r\n          center: true\r\n        })\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    getTypeList().then(res => {\r\n      this.type = res.data\r\n    })\r\n    getDiscount().then(res => {\r\n      this.discount = res.data\r\n    })\r\n  },\r\n  methods: {\r\n    reservation(val) {\r\n      this.dialogFormVisible = true\r\n      this.book.type_id = val.type_id\r\n      this.book.type_price = val.type_price\r\n    },\r\n    onSubmit() {\r\n      add(this.book).then(() => {\r\n        this.loading = true\r\n        setTimeout(() => {\r\n          this.loading = false\r\n        }, 5000)\r\n      }).catch(() => {\r\n        this.$refs['book'].resetFields()\r\n      })\r\n    },\r\n    onCancel() {\r\n      this.dialogFormVisible = false\r\n    },\r\n    formatterPicOne(row) {\r\n      if (row !== undefined) {\r\n        const pic = row.split('+')\r\n        return pic[0]\r\n      }\r\n    },\r\n    calTime() {\r\n      const stime = this.book.book_arrire\r\n      const etime = this.book.book_leave\r\n      const usedTime = Date.parse(etime) - Date.parse(stime)\r\n      const days = Math.floor(usedTime / (24 * 3600 * 1000))\r\n      this.book.book_day = days\r\n    },\r\n    bookprice(val) {\r\n      if (val) {\r\n        this.obj = this.discount.find((item) => {\r\n          return item.discount_id === val.discount_id\r\n        })\r\n        const price = parseFloat(val.type_price) * parseFloat(this.obj.discount_value)\r\n        this.book.book_price = price\r\n        this.book.dis_value = this.obj.discount_value\r\n        this.book.dis_reason = this.obj.discount_reason\r\n        this.book.type_name = val.type_name\r\n        return price\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"css\">\r\n.el-carousel{\r\n    margin: 5px;\r\n}\r\n.el-carousel__item:nth-child(2n) {\r\n    background-color: #99a9bf;\r\n}\r\n\r\n.el-carousel__item:nth-child(2n+1) {\r\n    background-color: #d3dce6;\r\n}\r\n\r\n</style>\r\n"]}]}